!function(t){function n(o){if(e[o])return e[o].exports;var i=e[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){!function(){"use strict";function t(n,e,o){function i(t){var i=n(t),r=o>i,a=d3.extent(n.range()),l=a[0],c=a[1],u=r?o-l:c-o;return 0===u&&(u=c-l),(r?-1:1)*u*(e+1)/(e+u/Math.abs(i-o))+o}return i.distortion=function(t){return arguments.length?(e=+t,i):e},i.focus=function(t){return arguments.length?(o=+t,i):o},i.copy=function(){return t(n.copy(),e,o)},i.nice=n.nice,i.ticks=n.ticks,i.tickFormat=n.tickFormat,d3.rebind(i,n,"domain","range","invert")}function n(){function t(){var t=d3.mouse(this)[0];t=t<O.range()[0]?O.range()[0]:t,t=t>O.range()[1]?O.range()[1]:t,N=Math.floor(O.invert(t)),O.focus(t),w===!1&&i(),w=!0,a()}function n(){w===!0&&r(),N=null,w=!1}function e(t){return function(){1===d3.event.touches.length&&(d3.event.preventDefault(),t.call(this))}}function o(){p.on("mousemove",t).on("mouseleave",n).on("touchend",function(){var t=Date.now()-v<500,e=m===d3.mouse(this)[0];(t||e)&&null!==N&&(window.location.href=f[N].href),n()}).on("dragstart",function(){d3.event.preventDefault()}).on("touchmove",e(t)).on("touchstart",e(function(){w=!1,t.call(this),m=d3.mouse(this)[0],v=Date.now()}))}function i(){d3.timer(function(){if(!w)return!0;var t=O.distortion(),n=J>t,e=t+.2;return n&&O.distortion(e>J?J:e),a(),!n})}function r(){var t=1;d3.timer(function(){if(w)return!0;t-=.04;var n=b(t),e=J*n;return O.distortion()>0&&(O.distortion(.001>n?0:e),a()),0===O.distortion()})}function a(){c.selectAll("li").style("left",function(t,n){return O(n)+"px"}).style("width",function(t,n){var e=O(n),o=O(n+1);return o-e+"px"}),d.transition().duration(50).style("opacity",function(t,n){return n===N?"1":0})}function l(){p.style({height:x+"px",width:y+"px",position:"relative"}),c=p.append("ul"),u=c.selectAll("li").data(f).enter().append("li").style("background-image",function(t){return"url("+t.src+")"}).style({position:"absolute",top:"0",overflow:"hidden","list-style":"none",outline:"1px solid black","background-size":x+"px","background-repeat":"no-repeat","background-position":"center",height:x+"px","float":"left"}),s=u.append("a").attr("href",function(t){return t.href}).style({width:"100%",height:x+"px",display:"block",position:"relative","text-decoration":"none",color:"white"}),d=s.append("p").attr("class","popover").style({width:"100%",height:"40px",padding:"5px 10px",position:"absolute",top:0,margin:0,"font-weight":"300","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",left:0,background:"rgba(0,0,0, 0.5)",opacity:0,"white-space":"nowrap"}).html(function(t){return t.title+" <br /> "+t.price})}var c,u,s,d,f,p=d3.select(this),h=p.attr("collection-gallery-data");if(!h)throw"collection-gallery-data attr needs to be set with stringified JSON data.";try{f=JSON.parse(p.attr("collection-gallery-data"))}catch(g){return console.error("unable to parse JSON, invalid JSON: "+g)}var v,m,y=p.node().getBoundingClientRect().width||600,x=p.node().getBoundingClientRect().height||200,b=d3.ease("cubic"),w=!1,k=200,D=y/f.length,J=k/D-1,N=null,O=d3.fisheye.scale(d3.scale.linear).domain([0,f.length]).range([0,y]).distortion(0);o(),l(),a()}d3.fisheye={scale:function(n){return t(n(),3,0)}},d3.selectAll("[collection-gallery]").each(n)}()}]);